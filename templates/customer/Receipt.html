{% extends "base.html" %}

{% block css %}
{{ super() }}
<link href="{{ url_for('static', filename='css/retrievehistory.css') }}" rel="stylesheet">
<link rel="stylesheet" type="text/css"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
<style>
      #no-order-history {
        text-align: center;
        margin-top: 10rem;
    }

    #no-order-history h1{
        margin: 0;
    }

    #no-order-history button {
        margin-top: 1.2rem;
    }
</style>
{% endblock %}

{% block navbar %}{% endblock %}

{% block title %}tastefully | Receipt{% endblock %}

{% block content %}
<div class="modal-header">
    <h2 class="modal-title">Receipt</h2>
</div>
<div> Thank you for your order! Your order will be delivered soon!</div>
<br>
<div class="modal-body">
    <table class="receipt">
        <tr><td colspan="4"><img src="https://i.imgur.com/AaUuxo9.png" style="height: 3.5rem; width: auto; text-align: center;"></td></tr>
        <tr></tr>
        <tr>
            <td colspan="2">To: {{ cart.get_delivery_dict(cust_info=True).get("address") }} </td>

            <td colspan="2">{{ cart.get_checkout_time("%I:%M %p %d/%m/%Y") }}</td>
        </tr>
        <tr>
            <td colspan="2">Postal Code: {{ cart.get_delivery_dict(cust_info=True).get("postal_code") }} </td>

            <td colspan="2">Paid By: {{ cart.get_delivery_dict(payment_info=True).get("card_type") }}</td>
        </tr>
        <tr><td colspan="4"><hr></td></tr>
        <tr>
            <td>Product Name</td>
            <td>Quantity</td>
            <td>Unit Price </td>
            <td>Subtotal</td>
        </tr>
        {% for product in cart.get_product_dict().values() %}
        <tr></tr>
        <tr>
            <td>{{ product.get_name() }}</td>
            <td> {{ product.get_qty() }}</td>
            <td> ${{ product.get_price() }}</td>
            <td> ${{ product.get_total_price() }}</td>
        </tr>

        {% endfor %}
        <tr></tr>
        <tr></tr>
        <tr>

            <td>Choice of Delivery:</td>
           <td > {{ cart.get_delivery_dict(method=True)[1] }}</td>
           <td ></td>
           <td>${{ cart.get_delivery_dict(method=True)[0] }} </td>
        </tr>
        <tr>
            <td colspan="4"><hr></td>
        </tr>
        <tr>
            <td colspan="2"></td>
            <td>Total:</td>
            <td>  ${{ cart.get_total() }} </td>
        </tr>

        <tr>
            <td colspan="2"></td>
            <td>GST Tax Included: 9%  </td>
            <td>${{ '%.2f'| format(cart.get_total() * 0.09) }}</td>
        </tr>
    </table>
</div>
<br>
<div>This email message will serve as your receipt.</div>

<br>
<div> Cheers, Tastefully Team</div>
{% endblock %}

{% block script %}
{{ super() }}
<script src="{{url_for('static', filename='js/cart.js')}}"></script>

{% endblock %}
